<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
    <style>
        body { font-family: sans-serif; padding: 15px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px; border-bottom: 1px solid #eee; text-align: left; }
        .plus-icon { color: #007bff; cursor: pointer; font-weight: bold; margin-left: 5px; }
        .row-biz { background: #f0f7ff; font-weight: bold; } /* æ¥­å‹™å€‰åº«é«˜äº® */
    </style>
</head>
<body>
    <h3>ğŸ“¦ åº«å­˜å¯¦æ™‚ç¸½è¡¨</h3>
    <table>
        <thead><tr><th>åº«å­˜ä½ç½®</th><th>ç”¢å“/åºè™Ÿ</th><th>æ•ˆæœŸ</th><th>åº«å­˜</th><th>å‚™è¨»</th></tr></thead>
        <tbody id="data-list"></tbody>
    </table>

    <script>
        async function load() {
            const { data } = await window._supabase.from('inventory_summary').select('*');
            // æ’åºé‚è¼¯ï¼šæ¥­å‹™å€‰åº«æ°¸é ç¬¬ä¸€
            data.sort((a,b) => (a.location === 'æ¥­å‹™å€‰åº«' ? -1 : 1));
            
            document.getElementById('data-list').innerHTML = data.map(i => `
                <tr class="${i.location === 'æ¥­å‹™å€‰åº«' ? 'row-biz' : ''}">
                    <td>${i.location}</td>
                    <td>${i.item_uuid}</td>
                    <td>${i.expiry_date || '-'}</td>
                    <td>${i.current_stock}</td>
                    <td>
                        ${i.location_note ? `<span class="plus-icon" onclick="alert('ğŸ“¢ æé†’ï¼š${i.location_note}')">[+]</span>` : ''}
                    </td>
                </tr>
            `).join('');
        }
        load();
    </script>
</body>
</html>